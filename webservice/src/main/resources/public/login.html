<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tech Ninja Login</title>

<style>
    body {
        margin:0;
        height:100vh;
        background: #000 url('https://i.ibb.co/S3rG9t4/thunder-tech-bg.jpg') center/cover no-repeat fixed;
        font-family:'Orbitron', sans-serif;
        display:flex;
        justify-content:center;
        align-items:center;
        overflow:hidden;
        color:white;
    }

    .flash-screen {
        position: fixed;
        top: 0; left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(255,255,255,0.85);
        pointer-events:none;
        opacity:0;
        mix-blend-mode:overlay;
        animation: flashEffect 6s infinite;
    }

    @keyframes flashEffect {
        0%,80%,100%{opacity:0}
        82%{opacity:1}
        83%{opacity:0}
        84%{opacity:0.7}
        85%{opacity:0}
    }

    .panel {
        background:rgba(0,0,0,0.75);
        border:2px solid cyan;
        width:340px;
        padding:25px;
        border-radius:12px;
        box-shadow:0 0 18px cyan;
        text-align:center;
    }

    input {
        width:100%;
        padding:10px;
        margin:8px 0;
        background:black;
        border:1px solid cyan;
        border-radius:6px;
        color:white;
        font-size:14px;
    }

    button {
        width:100%;
        margin-top:10px;
        padding:10px;
        background:cyan;
        border:none;
        border-radius:6px;
        font-weight:bold;
        color:black;
        cursor:pointer;
    }

    button:hover {
        box-shadow:0 0 18px cyan;
    }

    #output {
        font-size:11px;
        margin-top:10px;
        white-space:pre-wrap;
    }
</style>
</head>
<body>

<div class="flash-screen"></div>

<div class="panel">
    <h2>LOGIN ACCESS</h2>
    <form id="loginForm">
        <input id="username" type="text" placeholder="Username" required>
        <input id="password" type="password" placeholder="Password" required>
        <button type="submit">ENGAGE</button>
    </form>
    <pre id="output"></pre>
</div>

<script>
document.getElementById("loginForm").addEventListener("submit", async(e)=>{
    e.preventDefault();

    const username=document.getElementById("username").value.trim();
    const password=document.getElementById("password").value.trim();
    const output=document.getElementById("output");
    output.textContent="Authenticating...";

    try {
        const res=await fetch("/login",{
            method:"POST",
            headers:{ "Content-Type":"application/json" },
            body:JSON.stringify({username,password})
        });
        const txt=await res.text();
        output.textContent=`STATUS: ${res.status}\n${txt}`;

        if(res.status===200){
            const d=JSON.parse(txt);
            localStorage.setItem("username",d.username);
            localStorage.setItem("token",d.token);
            window.location="welcome.html";
        }
    } catch(err) {
        output.textContent="Network Error: "+err;
    }
});
</script>
</body>
</html>
